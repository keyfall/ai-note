原理:
![[9d167d9f3977e27f7b6eeda971d4f0a2.jpeg]]
 [[vgg16]]提取输入图像高级特征，因为会经过4次池化层，会生成一个长宽都为原图片1/16的特征图，特征图捕捉了原始图像中的各种模式和结构信息
 
convs在特征图上，使用3x3的卷积核进行卷积操作，目的是综合信息，特征增强，使每个位置可以有更多信息，因为使用的步长和padding都是1，所以尺寸不变

[[bilstm]]从两个方向处理数据，有助于更好地理解上下文,最终输出每个位置特征为N,256,H,W

FC全连接层后，reshape操作图片变为N,512,H,W

RPN(区域提案网络)进行text proposals(文本提议):anchors查找文字特征，预设置每个像素点有宽度为16，高度分别为[11,16,23,33,48,68,,97,139,198,283]的10个锚点框(anchor)，anchor由中心坐标和高度偏移量表示，因为当前特征图尺寸为原图的1/16，所以所有的锚点框宽度展开后，宽度刚好为原图，高度因为比16大，所有边缘处的高度肯定会超过原图，也因此对于高度不变的文字效果好，倾斜的文字效果不好，因为正角度倾斜时第二个字符的位置可能超过了锚点的高度，而负角度倾斜时，锚点不会探究到该区域，所以效果不好

3个分支输出：
	 - anchor的偏移量位置信息(2k)：c$_y$,h为图片的中心坐标高度和高度，c$^a_y$,h$^a$为锚点框的中心坐标高度和高度，这里使用对数和归一化是为了在高度不同情况下，结果更稳定
	![[Pasted image 20250109151623.png]]
	- anchor内前景背景得分情况: FC的分类分支令锚点框与所有[[正负样本]]的交并比的结果值确定前景和背景得分，最后通过softmax进行判定概率
	- 横向拉伸:因为锚点框的宽度为16，所以实际的文本框边界又可能不在0处，可能在其他位置，那么做一个拉伸，这里的x$_side$看别人介绍是从正负样本时得到的信息(如果在正负样本随机抽取128个数量时没有得到这个信息怎么办)
	![[Pasted image 20250109165804.png]]
	
NMS抑制与文本框组合
	- NMS把置信度不佳的框去除掉
	- 文本框组合:[[文本线构造算法]]把离得近，高度差不多，中心点的垂直位置相近的anchor拼接在一起，形成一个文本行，再根据文本行的所有anchor形成一个完整的文本框,

	
	
	